---
title: "Page Load Analysis"
author: "tdresser@chromium.org, maxlg@chromium.org, dproy@chromium.org"
date: "December 18, 2017"
output: 
  html_document:
    fig_width: 10
    fig_height: 7
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
options(scipen=10000)
knitr::opts_knit$set(verbose=TRUE)
source('main.R')
source('per_second.R')
```

## Gathering Data
* Load the Alexa top 10k on Nexus 5X's.
* Simulate 3G network.
* Both cold, warm and hot Page loads.
* Enable&diable Subresource Filter
* Reasonably detailed main thread attribution.

## Overall Distribution

```{r, echo=FALSE, warning=FALSE}
plot_totals_jitter +
  theme(strip.text.x = element_text(size = 7),
        strip.text.y = element_text(size = 7))
```

## Overall Distribution (Sampled)
```{r, echo=FALSE, warning=FALSE}
ggplotly(plot_totals_jitter_sampled +
  theme(strip.text.x = element_text(size = 7),
        strip.text.y = element_text(size = 7)), tooltip="text")
```

```{r echo=FALSE}
fcp_plots <- get_endpoint_plots("First Contentful Paint")
```

## First Contentful Paint

```{r echo=FALSE, warning=FALSE}
ggplotly(fcp_plots$warm_vs_cold, tooltip="text")
```

## First Contentful Paint | Quantiles
```{r echo=FALSE, warning=FALSE}
ggplotly(fcp_plots$contributors_by_quantile, tooltip = "text")
```

## First Contentful Paint | Normalized by quantiles
```{r echo=FALSE, warning=FALSE}
ggplotly(fcp_plots$contributors_by_quantile_normalized, tooltip="text")
```


```{r echo=FALSE}
ci_plots <- get_endpoint_plots("Consistently Interactive")
```

## Time To Interactive

```{r echo=FALSE, warning=FALSE}
ggplotly(ci_plots$warm_vs_cold, tooltip="text")
```

## Time To Interactive | Quantiles
```{r echo=FALSE, warning=FALSE}
ggplotly(ci_plots$contributors_by_quantile, tooltip = "text")
```

## Time To Interactive | Normalized by quantiles
```{r echo=FALSE, warning=FALSE}
ggplotly(ci_plots$contributors_by_quantile_normalized, tooltip="text")
```

## Important Timestamp Deltas
```{r echo=FALSE, warning=FALSE}
ggplotly(plot_important_times + 
           theme(strip.text.y = element_text(size = 7),
                 axis.text.x = element_text(size = 6)), tooltip="text") 
```

## Per Second Contributors
```{r echo=FALSE, warning=FALSE}
ggplotly(plot_per_second, tooltip="text")
```

